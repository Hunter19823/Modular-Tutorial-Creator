<!DOCTYPE html>
<html lang="en">
    <head>
        <title>Example Questions</title>
        <style>
        div.correct {
            border: 3px solid limegreen;
        }
        span {
            display: none;
        
        }
        span.correct {
            color: limegreen;
            display: inline;
        }
        div.incorrect {
            border: 3px solid red;
        }
        span.incorrect {
            color: red;
            display: inline;
        }
        </style>
    </head>
    <body>
        <div id='Questions'>
            <script>
                const questions = {};
                const QuestionsElement = document.getElementById('Questions');
                Object.size = function(obj) {
                    var size = 0, key;
                    for (key in obj) {
                        if (obj.hasOwnProperty(key)) size++;
                    }
                    return size;
                };
                
                class Option{
                    constructor(value){
                        this.value = value;
                        this.correctMessage = 'Correct!';
                        this.correct = function(){
                            this.div.className = 'correct';
                            this.span.className = 'correct';
                            this.span.innerHTML = this.correctMessage;
                        };
                        this.incorrectMessage = 'Incorrect!';
                        this.incorrect = function(){
                            this.div.className = 'incorrect';
                            this.span.className = 'incorrect';
                            this.span.innerHTML = this.incorrectMessage;
                        };
                        this.hide = function(){
                            this.div.className = '';
                            this.span.className = '';
                        }
                    }
                    create(id, index){
                        this.id = id;
                        this.index = index;
                        let div, label, input, span;
                        div         = document.createElement('div');
                        div.id      = id+"-block-"+(index);
                        
                        label       = document.createElement('label');
                        label.for   = id+'-option-'+(index);
                        
                        input       = document.createElement('input');
                        input.type  = 'radio';
                        input.name  = 'option';
                        input.value = this.value;
                        input.id    = id+'-option-'+(index);
                        
                        span        = document.createElement('span');
                        span.id     = id+'-result-'+(index);
                        
                        label.appendChild(input);
                        label.innerHTML += this.value;
                        div.appendChild(label);
                        div.appendChild(document.createElement('br'));
                        div.appendChild(span);
                        this.div = div;
                        this.label = label;
                        this.span = span;
                        this.input = input;
                        return div;
                    }
                    setIncorrectMessage(message){
                        this.incorrectMessage = message;
                        return this;
                    }
                    setCorrectMessage(message){
                        this.correctMessage = message;
                        return this;
                    }
                }
                
                class MultipleChoiceQuestion{
                    constructor(question, options, solutions){
                        this.question = question;
                        this.options = [];
                        for(let i=0; i<options.length;i++){
                            this.options.push(new Option(options[i]));
                        }
                        this.solutions = solutions;
                    }
                    
                    create(){
                        let title, description, index, item, button;
                        this.element = document.createElement('div');
                        this.element.id = 'Question-'+(Object.size(questions)+1);
                        questions[this.element.id] = this
                        QuestionsElement.appendChild(this.element);
                        title = document.createElement('h3');
                        title.innerText = this.question;
                        this.element.appendChild(title);
                        description = document.createElement('p');
                        description.innerText = 'Choose 1 answer.';
                        this.element.appendChild(description);
                        this.element.appendChild(document.createElement('hr'));
                        for(index=0; index<this.options.length; index++){
                            item = this.options[index];
                            this.element.appendChild(item.create(this.element.id,index+1));
                            this.element.appendChild(document.createElement('hr'));
                        }
                        
                        button = document.createElement('button');
                        button.type = 'button';
                        button.innerText = 'Check';
                        button.onclick = function(button){checkQuestion(button)};
                        this.element.appendChild(button);
                    }
                    
                    check(){
                        let i,option;
                        for(i=1; i<=this.options.length;i++){
                            option = document.getElementById(this.element.id+'-option-'+i);
                            if(option.checked){
                                if(this.solutions.includes(option.value)){
                                    this.options[i-1].correct();
                                }else{
                                    this.options[i-1].incorrect();
                                }
                            }else{
                                this.options[i-1].div.className = '';
                                this.options[i-1].span.className = '';
                            }
                        }
                    }
                    
                    addOption(value){
                        let option = new Option(value);
                        this.options.push(option);
                        return option;
                    }
                    addSolution(solution){
                        this.solutions.push(solution);
                        return this;
                    }
                    
                }
                function checkQuestion(button){
                    questions[button.srcElement.parentElement.id].check();
                }
                let q;
                q = new MultipleChoiceQuestion(
                'True or False, Expression 2 is an Object Oriented Language.',
                ['True','False'],'True');
                q.create();
                
                q = new MultipleChoiceQuestion(
                'Which segment of code will print Hello World to the player\'s chat?',
                ['println("Hello World");','log("Hello World")', 'Print(Hello World)', 'print("Hello World")', 'Print("Hello World")','print(Hello World)'],'print("Hello World")');
                q.create();
                
                q = new MultipleChoiceQuestion(
                'Which of the following code segmets represents a maximum brightness blue?',
                [],
                []);
                q.addOption('vec(255,0,0)').setIncorrectMessage('Incorrect!<br>That was the correct syntax, but not the correct color. That color represents the color Red.');
                q.addOption('vec(0,255,0)').setIncorrectMessage('Incorrect!<br>That was the correct syntax, but not the correct color. That color represents the color Green.');
                q.addOption('vec(0,0,255)').setCorrectMessage('Correct!<br>That was the correct syntax, and the correct color.');
                q.addOption('vec(256,0,0)').setIncorrectMessage('Incorrect!<br>That was the correct syntax, and not the correct color, and that represents the minimum intensity.');
                q.addOption('vec(0,256,0)').setIncorrectMessage('Incorrect!<br>That was the correct syntax, and not the correct color, and that represents the minimum intensity.');
                q.addOption('vec(0,0,256)').setIncorrectMessage('Incorrect!<br>That was the correct syntax, and that was the correct color, but that represents the minimum intensity, not the maximum.');
                q.addSolution('vec(0,0,255)');
                q.create();
                
                
                
                
            </script>
        </div>
        
    </body>
</html>